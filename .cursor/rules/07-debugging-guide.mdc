---
description: 
globs: 
alwaysApply: true
---
# ãƒ‡ãƒãƒƒã‚°ãƒ»ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰

## æ¦‚è¦
è‚²è‹±é¤¨å¤§å­¦å˜ä½ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºã«ãŠã„ã¦ã€å®Ÿéš›ã«ç™ºç”Ÿã—ãŸå•é¡Œã¨ãã®è§£æ±ºæ–¹æ³•ã‚’ã¾ã¨ã‚ãŸã‚¬ã‚¤ãƒ‰ã§ã™ã€‚åŠ¹ç‡çš„ãªãƒ‡ãƒãƒƒã‚°æ‰‹æ³•ã¨äºˆé˜²ç­–ã‚’æä¾›ã—ã¾ã™ã€‚

## ğŸš¨ é‡è¦ã‚¨ãƒ©ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨è§£æ±ºæ–¹æ³•

### 1. Runtime Error: å‹ä¸æ•´åˆã‚¨ãƒ©ãƒ¼ï¼ˆ2024å¹´12æœˆ27æ—¥ç™ºç”Ÿï¼‰

#### å•é¡Œã®ç—‡çŠ¶
- TypeScriptãƒ“ãƒ«ãƒ‰ã¯æˆåŠŸã™ã‚‹ãŒã€ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã§undefinedã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿ
- JSONãƒ‡ãƒ¼ã‚¿ã¨TypeScriptå‹å®šç¾©ã®ä¸æ•´åˆãŒåŸå› 

#### å…·ä½“ä¾‹
```typescript
// å•é¡Œã®ã‚ã‚‹ã‚³ãƒ¼ãƒ‰
const requirements = requirementsData.graduationRequirements; // undefined ã«ãªã‚‹

// å®Ÿéš›ã®JSONã®æ§‹é€ 
{
  "graduationRequirement": { ... }  // å˜æ•°å½¢
}
```

#### è§£æ±ºæ‰‹é †
1. **JSONæ§‹é€ ã®ç¢ºèª**: å®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›´æ¥ç¢ºèª
2. **å‹å®šç¾©ã®ä¿®æ­£**: å®Ÿéš›ã®æ§‹é€ ã«åˆã‚ã›ã¦å‹ã‚’æ›´æ–°
3. **å‹ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã®ä½¿ç”¨**: `as Type[]` ã§å‹ã‚’æ˜ç¤º
4. **nullãƒã‚§ãƒƒã‚¯ã®è¿½åŠ **: ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å®‰å…¨ãªå‡¦ç†

#### è§£æ±ºä¾‹
```typescript
// ä¿®æ­£å¾Œã®ã‚³ãƒ¼ãƒ‰
const requirements = requirementsData.graduationRequirement; // æ­£ã—ã„ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£å

// ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å®‰å…¨ãªå‡¦ç†
function processCourse(course: Course) {
  return course.department?.toLowerCase() || 'unknown';
}
```

### 2. Webpack Hot Reload Error

#### å•é¡Œã®ç—‡çŠ¶
```
Error: Cannot find module './447.js'
ChunkLoadError: Loading chunk 447 failed
```

#### è§£æ±ºæ‰‹é †
```bash
# 1. .nextãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å‰Šé™¤
Remove-Item -Recurse -Force .next

# 2. ä¾å­˜é–¢ä¿‚ã®å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
npm ci

# 3. å†ãƒ“ãƒ«ãƒ‰
npm run build

# 4. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼å†èµ·å‹•
npm run dev
```

### 3. TypeScript Import Path Error

#### å•é¡Œã®ç—‡çŠ¶
- `Cannot find module '../../../lib/types'` ã‚¨ãƒ©ãƒ¼
- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç§»å‹•å¾Œã®ç›¸å¯¾ãƒ‘ã‚¹ä¸æ•´åˆ

#### è§£æ±ºæ‰‹é †
1. **ç›¸å¯¾ãƒ‘ã‚¹ã®å†è¨ˆç®—**: ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ ã‚’ç¢ºèª
2. **ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ–‡ã®ä¿®æ­£**: æ­£ã—ã„ãƒ‘ã‚¹ã«æ›´æ–°
3. **IDEã®è‡ªå‹•ä¿®æ­£æ©Ÿèƒ½ã®æ´»ç”¨**: VSCodeã®ã‚ªãƒ¼ãƒˆã‚¤ãƒ³ãƒãƒ¼ãƒˆ

#### æ­£ã—ã„ãƒ‘ã‚¹ä¾‹
```typescript
// app/components/course-search/CourseSearch.tsx ã‹ã‚‰
import { Course, UserCourse } from '../../lib/types';        // âœ… æ­£ã—ã„
import { Course, UserCourse } from '../../../lib/types';     // âŒ é–“é•ã„
```

### 4. Component Not Rendering

#### å•é¡Œã®ç—‡çŠ¶
- TypeScriptã‚¨ãƒ©ãƒ¼ã¯ãªã„ãŒã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒè¡¨ç¤ºã•ã‚Œãªã„
- ç™½ã„ãƒšãƒ¼ã‚¸ã‚„éƒ¨åˆ†çš„ã«æ¬ ã‘ã‚‹è¡¨ç¤º

#### ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ
1. **`'use client'` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–**: Clientã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«å¿…é ˆ
2. **ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ–¹å¼**: `export default` ã®ç¢ºèª
3. **ã‚¤ãƒ³ãƒãƒ¼ãƒˆå**: named import vs default import
4. **æ¡ä»¶ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°**: æ¡ä»¶ãŒæº€ãŸã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

#### ãƒ‡ãƒãƒƒã‚°ä¾‹
```typescript
// 1. use clientã®ç¢ºèª
'use client';  // ã“ã‚ŒãŒå¿…è¦

// 2. ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ–¹å¼ã®ç¢ºèª
export default function CourseSearch() {  // default export
  return <div>Content</div>;
}

// 3. ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ–¹å¼ã®ç¢ºèª
import CourseSearch from './CourseSearch';  // default import
// ã¾ãŸã¯
import { CourseSearch } from './index';    // named import (index.tsã§re-export)
```

## ğŸ” åŠ¹ç‡çš„ãªãƒ‡ãƒãƒƒã‚°æ‰‹æ³•

### 1. æ®µéšçš„ãªå•é¡Œåˆ‡ã‚Šåˆ†ã‘

#### ãƒ¬ãƒ™ãƒ«1: TypeScript ãƒ¬ãƒ™ãƒ«
```bash
# TypeScript ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãƒã‚§ãƒƒã‚¯
npx tsc --noEmit

# ã‚ˆã‚Šè©³ç´°ãªã‚¨ãƒ©ãƒ¼æƒ…å ±
npx tsc --noEmit --pretty
```

#### ãƒ¬ãƒ™ãƒ«2: ãƒ“ãƒ«ãƒ‰ ãƒ¬ãƒ™ãƒ«
```bash
# Next.js ãƒ“ãƒ«ãƒ‰ãƒã‚§ãƒƒã‚¯
npm run build

# è©³ç´°ãªãƒ“ãƒ«ãƒ‰æƒ…å ±
npm run build -- --debug
```

#### ãƒ¬ãƒ™ãƒ«3: ãƒ©ãƒ³ã‚¿ã‚¤ãƒ  ãƒ¬ãƒ™ãƒ«
```typescript
// console.logã§ã®ãƒ‡ãƒãƒƒã‚°
console.log('Data:', data);
console.log('Type:', typeof data);
console.log('Length:', data?.length);

// æ¡ä»¶ä»˜ããƒ­ã‚°
if (process.env.NODE_ENV === 'development') {
  console.log('Debug info:', debugData);
}
```

### 2. React DevTools ã®æ´»ç”¨

#### Props ã¨State ã®ç¢ºèª
1. React DevTools ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
2. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆéšå±¤ã®ç¢ºèª
3. Props ã®å†…å®¹ç¢ºèª
4. State ã®å¤‰åŒ–è¿½è·¡

#### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ
1. Profiler ã‚¿ãƒ–ã§å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ç¢ºèª
2. é‡ã„å‡¦ç†ã®ç‰¹å®š
3. useMemo/useCallback ã®åŠ¹æœç¢ºèª

### 3. ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ»ãƒ‡ãƒ¼ã‚¿ç¢ºèª

#### ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ç¢ºèª
```typescript
// ãƒ–ãƒ©ã‚¦ã‚¶ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§å®Ÿè¡Œ
localStorage.getItem('ikueikan-user-data');

// ãƒ‡ãƒ¼ã‚¿ã®å½¢å¼ç¢ºèª
JSON.parse(localStorage.getItem('ikueikan-user-data') || '{}');
```

#### JSONãƒ‡ãƒ¼ã‚¿ç¢ºèª
```bash
# JSONãƒ•ã‚¡ã‚¤ãƒ«ã®æ§‹é€ ç¢ºèª
cat app/lib/data/courses.json | jq '.courses[0]'
cat app/lib/data/requirements.json | jq keys
```

## ğŸ§ª ãƒ†ã‚¹ãƒˆé§†å‹•ãƒ‡ãƒãƒƒã‚°

### 1. å˜ä½“ãƒ†ã‚¹ãƒˆã§ã®å•é¡Œç‰¹å®š

#### ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ã®ãƒ†ã‚¹ãƒˆ
```typescript
// utils.test.ts
import { extractSystemFromCategory, calculateCreditsBySystem } from '../lib/utils';

describe('extractSystemFromCategory', () => {
  test('æ­£å¸¸ãªã‚«ãƒ†ã‚´ãƒªã‹ã‚‰ã®ç³»åæŠ½å‡º', () => {
    const result = extractSystemFromCategory('æƒ…å ±ãƒ»ãƒ¡ãƒ‡ã‚£ã‚¢ç³»(Information and Media)');
    expect(result).toBe('æƒ…å ±ãƒ»ãƒ¡ãƒ‡ã‚£ã‚¢ç³»');
  });

  test('è‹±èªéƒ¨åˆ†ãŒãªã„å ´åˆ', () => {
    const result = extractSystemFromCategory('æƒ…å ±ãƒ»ãƒ¡ãƒ‡ã‚£ã‚¢ç³»');
    expect(result).toBe('æƒ…å ±ãƒ»ãƒ¡ãƒ‡ã‚£ã‚¢ç³»');
  });
});
```

#### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆ
```typescript
// CourseSearch.test.tsx
import { render, screen } from '@testing-library/react';
import CourseSearch from '../components/CourseSearch';

test('æ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹', () => {
  const mockProps = {
    courses: [],
    onSearchResults: jest.fn()
  };
  
  render(<CourseSearch {...mockProps} />);
  
  expect(screen.getByPlaceholderText('ç§‘ç›®åã§æ¤œç´¢')).toBeInTheDocument();
});
```

### 2. E2Eãƒ†ã‚¹ãƒˆã§ã®çµ±åˆç¢ºèª

#### Playwright MCPãƒ‘ã‚¿ãƒ¼ãƒ³
```typescript
// E2Eãƒ†ã‚¹ãƒˆä¾‹
test('ç§‘ç›®æ¤œç´¢ã¨å±¥ä¿®ç™»éŒ²ã®çµ±åˆãƒ†ã‚¹ãƒˆ', async ({ page }) => {
  // 1. ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰
  await page.goto('http://localhost:3000');
  
  // 2. æ¤œç´¢å®Ÿè¡Œ
  await page.fill('[data-testid="search-keyword"]', 'æƒ…å ±');
  await page.click('[data-testid="search-submit"]');
  
  // 3. çµæœç¢ºèª
  await expect(page.locator('[data-testid="course-list"]')).toBeVisible();
  
  // 4. å±¥ä¿®ç™»éŒ²
  await page.click('[data-testid="course-item-first"] [data-testid="register-button"]');
  
  // 5. çŠ¶æ…‹ç¢ºèª
  await expect(page.locator('[data-testid="course-status-completed"]')).toBeVisible();
});
```

## ğŸ“Š ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å•é¡Œã®ãƒ‡ãƒãƒƒã‚°

### 1. é‡ã„è¨ˆç®—å‡¦ç†ã®ç‰¹å®š

#### React Profiler ã§ã®æ¸¬å®š
```typescript
// ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®šç”¨ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
import { Profiler } from 'react';

function onRenderCallback(id: string, phase: string, actualDuration: number) {
  if (actualDuration > 100) {  // 100msä»¥ä¸Šã®é‡ã„å‡¦ç†ã‚’æ¤œå‡º
    console.warn(`Slow render detected: ${id} took ${actualDuration}ms`);
  }
}

<Profiler id="CourseList" onRender={onRenderCallback}>
  <CourseList courses={courses} />
</Profiler>
```

#### useMemo ã®åŠ¹æœç¢ºèª
```typescript
// å‰: ãƒ¡ãƒ¢åŒ–ãªã—
const systemCredits = calculateCreditsBySystem(courses, userCourses);

// å¾Œ: ãƒ¡ãƒ¢åŒ–ã‚ã‚Š
const systemCredits = useMemo(() => 
  calculateCreditsBySystem(courses, userCourses), 
  [courses, userCourses]
);

// ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°ã§å†è¨ˆç®—å›æ•°ã‚’ç¢ºèª
const systemCredits = useMemo(() => {
  console.log('Recalculating system credits');
  return calculateCreditsBySystem(courses, userCourses);
}, [courses, userCourses]);
```

### 2. ç„¡é™ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®å›é¿

#### ã‚ˆãã‚ã‚‹åŸå› ã¨å¯¾ç­–
```typescript
// âŒ å•é¡Œ: ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç›´æ¥ä¾å­˜é…åˆ—ã«å…¥ã‚Œã‚‹
useEffect(() => {
  // å‡¦ç†
}, [filter]); // filter ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯æ¯å›æ–°ã—ã„ãŸã‚ç„¡é™ãƒ«ãƒ¼ãƒ—

// âœ… è§£æ±º: å€¤ã®ã¿ã‚’ä¾å­˜é…åˆ—ã«å…¥ã‚Œã‚‹
useEffect(() => {
  // å‡¦ç†
}, [filter.keyword, filter.category]); // ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–å€¤ã®ã¿

// âœ… ã¾ãŸã¯: useMemoã§ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒ¡ãƒ¢åŒ–
const memoizedFilter = useMemo(() => filter, [filter.keyword, filter.category]);
useEffect(() => {
  // å‡¦ç†
}, [memoizedFilter]);
```

## ğŸ› ï¸ é–‹ç™ºç’°å¢ƒã®å•é¡Œè§£æ±º

### 1. ã‚µãƒ¼ãƒãƒ¼é‡è¤‡èµ·å‹•å•é¡Œ

#### å•é¡Œç¢ºèª
```bash
# ãƒãƒ¼ãƒˆä½¿ç”¨çŠ¶æ³ã®ç¢ºèª
netstat -an | findstr :3000

# ãƒ—ãƒ­ã‚»ã‚¹ç¢ºèª
tasklist | findstr node
```

#### è§£æ±ºæ–¹æ³•
```bash
# ãƒ—ãƒ­ã‚»ã‚¹çµ‚äº†ï¼ˆWindowsï¼‰
taskkill /f /im node.exe

# ãƒ—ãƒ­ã‚»ã‚¹çµ‚äº†ï¼ˆMac/Linuxï¼‰
killall node

# ã¾ãŸã¯ç‰¹å®šã®ãƒãƒ¼ãƒˆã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã‚’çµ‚äº†
npx kill-port 3000
```

### 2. ä¾å­˜é–¢ä¿‚ã®å•é¡Œ

#### package-lock.json ã®å•é¡Œ
```bash
# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
npm cache clean --force

# lock ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤ã¨å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
rm package-lock.json
rm -rf node_modules
npm install
```

#### Node.js ãƒãƒ¼ã‚¸ãƒ§ãƒ³å•é¡Œ
```bash
# ç¾åœ¨ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª
node --version
npm --version

# æ¨å¥¨ãƒãƒ¼ã‚¸ãƒ§ãƒ³: Node.js 18.x or 20.x
# Next.js 14 ã¨ã®äº’æ›æ€§ç¢ºèª
```

## ğŸ“ ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°ã®åŠ¹æœçš„ãªä½¿ç”¨

### 1. éšå±¤çš„ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«

#### æœ¬ç•ªç’°å¢ƒã§ã®å®‰å…¨ãªãƒ­ã‚°
```typescript
const DEBUG = process.env.NODE_ENV === 'development';

// ãƒ¬ãƒ™ãƒ«åˆ¥ãƒ­ã‚°é–¢æ•°
const log = {
  error: (message: string, data?: any) => {
    console.error(`[ERROR] ${message}`, data);
  },
  warn: (message: string, data?: any) => {
    console.warn(`[WARN] ${message}`, data);
  },
  info: (message: string, data?: any) => {
    if (DEBUG) console.info(`[INFO] ${message}`, data);
  },
  debug: (message: string, data?: any) => {
    if (DEBUG) console.log(`[DEBUG] ${message}`, data);
  }
};

// ä½¿ç”¨ä¾‹
log.debug('Filter updated', { filter, resultCount: filteredCourses.length });
log.warn('Course not found', { courseId });
log.error('Failed to save user data', { error });
```

### 2. ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼è¿½è·¡

#### ãƒ—ãƒ­ãƒƒãƒ—ã‚¹ã®æµã‚Œç¢ºèª
```typescript
// HOC ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ãƒ—ãƒ­ãƒƒãƒ—ã‚¹è¿½è·¡
function withPropsLogging<T>(Component: React.ComponentType<T>, componentName: string) {
  return function LoggedComponent(props: T) {
    if (process.env.NODE_ENV === 'development') {
      console.log(`${componentName} received props:`, props);
    }
    return <Component {...props} />;
  };
}

// ä½¿ç”¨ä¾‹
const LoggedCourseSearch = withPropsLogging(CourseSearch, 'CourseSearch');
```

## ğŸ¯ äºˆé˜²çš„ãƒ‡ãƒãƒƒã‚°æˆ¦ç•¥

### 1. å‹å®‰å…¨æ€§ã®å¼·åŒ–

#### å³å¯†ãªå‹ãƒã‚§ãƒƒã‚¯
```typescript
// tsconfig.json ã§ã®å³å¯†è¨­å®š
{
  "compilerOptions": {
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "exactOptionalPropertyTypes": true
  }
}
```

#### Runtime å‹ãƒã‚§ãƒƒã‚¯
```typescript
// å‹ã‚¬ãƒ¼ãƒ‰é–¢æ•°
function isCourse(obj: any): obj is Course {
  return obj && 
         typeof obj.id === 'string' && 
         typeof obj.name === 'string' &&
         typeof obj.credits === 'number';
}

// ä½¿ç”¨ä¾‹
if (!courses.every(isCourse)) {
  throw new Error('Invalid course data detected');
}
```

### 2. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®çµ±ä¸€

#### Error Boundary ã®å®Ÿè£…
```typescript
class ErrorBoundary extends React.Component<Props, State> {
  constructor(props: Props) {
    super(props);
    this.state = { hasError: false, error: null };
  }

  static getDerivedStateFromError(error: Error): State {
    return { hasError: true, error };
  }

  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {
    // ã‚¨ãƒ©ãƒ¼ãƒ¬ãƒãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ã«é€ä¿¡
    console.error('Component error caught:', error, errorInfo);
  }

  render() {
    if (this.state.hasError) {
      return (
        <div className="p-4 bg-red-50 border border-red-200 rounded-lg">
          <h2 className="text-red-800 font-semibold">ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ</h2>
          <p className="text-red-600">ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ãŠè©¦ã—ãã ã•ã„ã€‚</p>
          {process.env.NODE_ENV === 'development' && (
            <details className="mt-2">
              <summary>ã‚¨ãƒ©ãƒ¼è©³ç´°</summary>
              <pre className="text-xs">{this.state.error?.message}</pre>
            </details>
          )}
        </div>
      );
    }

    return this.props.children;
  }
}
```

ã“ã®åŒ…æ‹¬çš„ãªãƒ‡ãƒãƒƒã‚°ã‚¬ã‚¤ãƒ‰ã‚’æ´»ç”¨ã—ã¦ã€åŠ¹ç‡çš„ãªå•é¡Œè§£æ±ºã‚’è¡Œã£ã¦ãã ã•ã„ã€‚å•é¡ŒãŒç™ºç”Ÿã—ãŸéš›ã¯ã€æ®µéšçš„ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§åŸå› ã‚’ç‰¹å®šã—ã€é©åˆ‡ãªè§£æ±ºç­–ã‚’é©ç”¨ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚
